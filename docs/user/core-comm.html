<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Communication with CORE · NOI Synthesizer</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&gt; Very WIP"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Communication with CORE · NOI Synthesizer"/><meta property="og:type" content="website"/><meta property="og:url" content="https://noi-synth.com/index.html"/><meta property="og:description" content="&gt; Very WIP"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/undefined"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="stylesheet" href="/css/main.css"/></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><h2 class="headerTitle">NOI Synthesizer</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/about/what-is-noi" target="_self">Docs</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>USER</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">About</h3><ul><li class="navListItem"><a class="navItem" href="/docs/about/what-is-noi">What is NOI Synth</a></li><li class="navListItem"><a class="navItem" href="/docs/about/technical-specs">Technical specifications</a></li><li class="navListItem"><a class="navItem" href="/docs/about/getting-started">Getting Started</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Project Documentation</h3><ul><li class="navListItem"><a class="navItem" href="/docs/project-doc/overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/project-doc/parts">Parts overview</a></li><li class="navListItem"><a class="navItem" href="/docs/project-doc/hardware">Hardware overview</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">USER</h3><ul><li class="navListItem navListItemActive"><a class="navItem" href="/docs/user/core-comm">Communication with CORE</a></li></ul></div></div></section></div><script>
            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docMainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">Communication with CORE</h1></header><article><div><span><blockquote>
<p>Very WIP</p>
</blockquote>
<p>Communication with CORE is established via Serial communication. Both devices can send a message to each other, transfering some kind of command with parameters.</p>
<h2><a class="anchor" aria-hidden="true" id="message-format"></a><a href="#message-format" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Message format</h2>
<p>Each message contains a command and its parameters. Devices can send multiple commands within single communication, one command each line.</p>
<p>Each line starts with the command, continuing with the parameters, separated with slash <code>|</code> character. Some commands don't have any parameters.</p>
<p>Example:</p>
<pre><code class="hljs css language-text">list_add_item|10|Settings and others
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="list-of-available-commands-and-parameters"></a><a href="#list-of-available-commands-and-parameters" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>List of available commands and parameters</h2>
<h3><a class="anchor" aria-hidden="true" id="global-commands"></a><a href="#global-commands" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Global commands</h3>
<table>
<thead>
<tr><th>Command name</th><th>Description</th><th>Parameters</th></tr>
</thead>
<tbody>
<tr><td><code>hello</code></td><td>A warm greeting (has no practical use)</td><td></td></tr>
<tr><td><code>whatsup</code></td><td>Handshaking request for CORE, sends version, waits for response</td><td>version (<em>string</em>), mode (<em>int</em>)</td></tr>
<tr><td><code>notmuch</code></td><td>Handshaking response ack for USER, sends version too</td><td>version (<em>string</em>)</td></tr>
<tr><td><code>wait</code></td><td>UI should wait until core is <code>ready</code></td><td>timeout (optional, <em>int</em>)</td></tr>
<tr><td><code>ready</code></td><td>UI can continue after asking for <code>wait</code></td><td></td></tr>
<tr><td><code>shutdown</code></td><td>Device is shutting down</td><td></td></tr>
</tbody>
</table>
<h3><a class="anchor" aria-hidden="true" id="other-commands"></a><a href="#other-commands" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Other commands</h3>
<table>
<thead>
<tr><th>Command name</th><th>Description</th><th>Parameters</th></tr>
</thead>
<tbody>
<tr><td><code>screen</code></td><td>Update current displayed screen</td><td>screen name (<em>string</em>)</td></tr>
<tr><td><code>status</code></td><td>Update playback status</td><td>status (<em>string</em>)</td></tr>
<tr><td><code>time</code></td><td>Update current playback time (in seconds)</td><td>time (<em>float</em>)</td></tr>
<tr><td><code>project</code></td><td>Update information about currently opened project</td><td>name (<em>string</em>), bpm (<em>float</em>)</td></tr>
</tbody>
</table>
<table>
<thead>
<tr><th>Command name</th><th>Description</th><th>Parameters</th></tr>
</thead>
<tbody>
<tr><td><code>btn_press</code></td><td>Informs that button has been pressed</td><td>button ID (<em>int</em>)</td></tr>
<tr><td><code>knob_val</code></td><td>Knob value has changed</td><td>knob ID (<em>int</em>), value (<em>float</em>)</td></tr>
</tbody>
</table>
<blockquote>
<p>TODO!</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="example"></a><a href="#example" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h2>
<p>An example of communication after powering on the NOI:</p>
<table>
    <tr>
        <th>CORE -> USER</th>
        <th>USER -> CORE</th>
    </tr>  
    <tr>
<td>  
<pre><code class="hljs">hello
whatsup|v0.0.1|0

wait
screen|idle
status|stopped
time|0.0000
project|newproj.noi|0|100
ready





_
</code></pre>
</td>
<td>
<pre><code class="hljs">hello

notmuch|v0.0.1






btn_press|23
knob_value|0|0.12124588
knob_value|0|0.12158788
knob_value|0|0.12387788
knob_value|0|0.13883321
_
</code></pre>
</td>
    </tr>
</table>
<h2><a class="anchor" aria-hidden="true" id="speeds-and-theoretical-limits"></a><a href="#speeds-and-theoretical-limits" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Speeds and theoretical limits</h2>
<p>Devices are designed to use 9600bps baud rate. 1.17 kBps should be enough for exchanging important information fast enough.</p>
<p>Sending an information about pressed button should theoretically take around 12.5ms (assuming the message is 15B long). In one second we can fill the list with 60 items (assuming trasmitting one list item costs 20B). The display of the device won't be able to display more than 5 items on the screen at the time.</p>
<h2><a class="anchor" aria-hidden="true" id="error-handling"></a><a href="#error-handling" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Error handling</h2>
<p>Errors are detected with parity bits automatically (8N1).</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/project-doc/hardware"><span class="arrow-prev">← </span><span>Previous</span></a></div></div></div><nav class="onPageNav docOnPageNav"><ul class="toc-headings"><li><a href="#message-format">Message format</a></li><li><a href="#list-of-available-commands-and-parameters">List of available commands and parameters</a><ul class="toc-headings"><li><a href="#global-commands">Global commands</a></li><li><a href="#other-commands">Other commands</a></li></ul></li><li><a href="#example">Example</a></li><li><a href="#speeds-and-theoretical-limits">Speeds and theoretical limits</a></li><li><a href="#error-handling">Error handling</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"></a><div><h5>Docs</h5><a href="/docs/en/about/what-is-noi.html">Documentation</a></div><div><h5>More</h5><a href="https://github.com/noi-synth">GitHub</a></div></section><section class="copyright"></section></footer></div></body></html>